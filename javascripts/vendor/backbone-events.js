(function(){var e=/\s+/,t=function(t,n,r,i){if(!r)return!0;if(typeof r=="object")for(var s in r)t[n].apply(t,[s,r[s]].concat(i));else{if(!e.test(r))return!0;var o=r.split(e);for(var u=0,a=o.length;u<a;u++)t[n].apply(t,[o[u]].concat(i))}},n=function(e,t){var n,r=-1,i=e.length;switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,t[0]);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,t[0],t[1]);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,t[0],t[1],t[2]);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t)}},r={on:function(e,n,r){if(!t(this,"on",e,[n,r])||!n)return this;this._events||(this._events={});var i=this._events[e]||(this._events[e]=[]);return i.push({callback:n,context:r,ctx:r||this}),this},once:function(e,n,r){if(!t(this,"once",e,[n,r])||!n)return this;var i=this,s=_.once(function(){i.off(e,s),n.apply(this,arguments)});return s._callback=n,this.on(e,s,r),this},off:function(e,n,r){var i,s,o,u,a,f,l,c;if(!this._events||!t(this,"off",e,[n,r]))return this;if(!e&&!n&&!r)return this._events={},this;u=e?[e]:_.keys(this._events);for(a=0,f=u.length;a<f;a++){e=u[a];if(i=this._events[e]){o=[];if(n||r)for(l=0,c=i.length;l<c;l++)s=i[l],(n&&n!==s.callback&&n!==s.callback._callback||r&&r!==s.context)&&o.push(s);this._events[e]=o}}return this},trigger:function(e){if(!this._events)return this;var r=slice.call(arguments,1);if(!t(this,"trigger",e,r))return this;var i=this._events[e],s=this._events.all;return i&&n(i,r),s&&n(s,arguments),this},listenTo:function(e,t,n){var r=this._listeners||(this._listeners={}),i=e._listenerId||(e._listenerId=_.uniqueId("l"));return r[i]=e,e.on(t,typeof t=="object"?this:n,this),this},stopListening:function(e,t,n){var r=this._listeners;if(!r)return;if(e)e.off(t,typeof t=="object"?this:n,this),!t&&!n&&delete r[e._listenerId];else{typeof t=="object"&&(n=this);for(var i in r)r[i].off(t,n,this);this._listeners={}}return this}};window.CodeSyncEvents=r})();